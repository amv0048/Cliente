<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">

</head>
<body class="bg-primary">
    <form action="" class="container-fluid text-left w-50 mt-5 bg-white p-4 rounded">
        <label for="">DNI</label>
        <input class="form-control" type="text" name="dni" id="dni">
        <label for="">Nombre</label>
        <input class="form-control" type="text" name="name" id="name">
        <label for="">Apellidos</label>
        <input class="form-control" type="text" name="ape" id="ape">
        <label for="">Fecha de nacimiento</label>
        <input class="form-control" type="date" name="fnac" id="fnac">
        <label for="">Web Personal</label>
        <input class="form-control" type="text" name="dni" id="dni">
        <label for="">Contraseña</label>
        <input class="form-control" type="password" name="pass" id="pass">
        <input class="btn btn-secondary mt-2" type="reset" value="resetar">
        <input class="btn btn-primary mt-2" type="submit" value="Enviar">
    </form>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js" integrity="sha384-FKyoEForCGlyvwx9Hj09JcYn3nv7wiPVlz7YYwJrWVcXK/BmnVDxM+D2scQbITxI" crossorigin="anonymous"></script>

    <script>
        window.onload = () => {
            const dni = document.querySelectorAll('input')[0];
            const name = document.querySelectorAll('input')[1];
            const ape = document.querySelectorAll('input')[2];
            const fechaN = document.querySelectorAll('input')[3];
            const webP = document.querySelectorAll('input')[4];
            const pass = document.querySelectorAll('input')[5];

            const reset = document.querySelectorAll('input')[6];
            const btnS = document.querySelectorAll('input')[7];
            
            btnS.addEventListener('click', (e) => {
                e.preventDefault();
               checkDni(dni.value.toUpperCase(), dni);
               checkName(name.value, name);
               checkName(ape.value, ape);
               checkDate(fechaN.value, fechaN);
               checkWeb(webP.value, webP);
               if (checkPass(pass.value, pass)){
                    alert("TODO OK");
               }
               
            });
        }

        function checkDni(dni, input){
            const abc = "abcdefghijklmnñopqrstuvwxyz".toUpperCase();
            if (dni === ''|| dni.length > 9 || !isNaN(dni) || isNaN(parseInt(dni.substring(0, 8)))|| !abc.includes(dni[dni.length-1])){
                input.focus();
                input.style.borderColor = 'red';
            }
        }

        function checkName(name, input){
            name = name.trim();
            let cont = 0;
            if (name === ''){
                input.value = "Nombre Invalido";
                input.focus();
                input.style.borderColor = 'red';
            }

            for (let i = 0; i < name.length; i++) {
                if (name[i] == ' ' && name[i +1] == ' '){
                    name = name.slice(0, i) + name.slice(i + 1);
                    i--;
                }
            }
            input.value = name;
            for (let i = 0; i < name.length; i++) {
                if (cont >= 2){
                    input.value = "No mas de 2 nombres";
                    input.focus();
                    input.style.borderColor = 'red';
                }
                if (name[i] == ' '){
                    cont++;
                }
            }
        }

        function checkDate(fechaN, input){
            if (fechaN === ' '){
                input.focus();
                input.style.borderColor = 'red';
            }
            else if (fechaN.split('-').length != 3){
                input.focus();
                input.style.borderColor = 'red';
            }
        }

        function checkWeb(web, input){
            const correctStart = wen.substring(0,8);
            if (!web.startWith('https://')){
                input.value = "Web no valida, debe empezar por https://";
                input.focus();
                input.style.borderColor = 'red';
            }
        }

        function checkPass(pass, input){
            if (pass.length < 8 || pass.length > 12){
                input.focus();
                input.style.borderColor = 'red';
                alert('La contraseña debe tener entre 8 y 12 caracteres');
                return false;
            }
            else{
                return true;
            }
        }
    </script>
</body>
</html>